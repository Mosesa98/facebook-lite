window.FB||function(e){function t(){this.auth=checkCookie("fb.lite")?JSON.parse(getCookie("fb.lite")):!1,this.promise=new o(this)}function n(e){var t="";for(key in e)t+=key+"="+e[key]+"&";return t=t.slice(0,t.length-1)}function o(e){var t=null,n=[],o=!1;this.add=function(i){o?i.apply(e,t):n.push(i)},this.resolve=function(){if(!o){t=arguments,o=!0;for(var i;i=n.shift();)i.apply(e,arguments);n=null}}}t.prototype.init=function(t){t.logging===!0&&e.location.hash.search("access_token")>-1&&(this.parseResponse(e.location.href),e.location.hash="#"),t.type||(t.type="app"),"app"==t.type&&t.namespace!==void 0&&(t.redirect_uri="https://apps.facebook.com/"+namespace+"/"),"web"==t.type&&(t.redirect_uri=e.location.origin),this.options=t},t.prototype.getLoginStatus=function(e){return e(this.auth)},t.prototype.login=function(e,t){var n=this.options.appId||!1,o=this.options.redirect_uri||"https://www.facebook.com/connect/login_success.html",i=t.scope||!1,s=t.display||"page",a=t.auth_type||!1;if(n){if(this.auth&&"reauthenticate"!=a)return e(this.auth);this.promise.add(e);var r="https://www.facebook.com/dialog/oauth/?client_id="+n+"&redirect_uri="+encodeURIComponent(o)+"&display="+s+"&response_type=token";i&&(r+="&scope="+i),this.window(r)}},t.prototype.api=function(){var e,t,o,i,s=this.auth.authResponse.accessToken;switch(arguments.length){case 0:return;case 1:e=arguments[0];break;case 2:e=arguments[0],i=arguments[1];break;case 3:e=arguments[0],t=arguments[1],i=arguments[2];break;case 4:e=arguments[0],t=arguments[1],o=n(arguments[2]),i=arguments[3]}if(void 0!==e){e=e.replace(/^\/|\/$/g,""),t||(t="get"),o||(o=null);var s=(e.search("\\?")>-1?"&":"?")+"access_token="+s,a="https://graph.facebook.com/"+e+s,r=new XMLHttpRequest,u=this;return r.open(t,a,!0),null!=o&&(r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Content-Length",o.length)),r.send(o),r.onerror=function(){u.noConnection()},i===void 0?r:(r.onload=function(e){var t=JSON.parse(e.target.responseText);i.call(this,t)},void 0)}},t.prototype.ui=function(){},t.prototype.parseResponse=function(e){var t=unescape(e).split("#")[1];t=unescape(t);var n=t.split("&")[0].split("=")[1],o=t.split("&")[1].split("=")[1],i={status:"connected",authResponse:{accessToken:n,expiresIn:o}};setCookie("fb.lite",JSON.stringify(i),o),this.auth=i,this.promise.resolve(this.auth)},t.prototype.noConnection=function(){navigator.notification.alert("Unfortunately your request to the server has failed... Please try again later.",null,"No Connection")},t.prototype.window=function(t){e.location=t},t.prototype.ajax=function(e,t,n){if(e||(e=!1),n||(n=!1),e){t||(t=null);var e=authorize_url,o=new XMLHttpRequest,i=this;return o.open(method,e,!0),null!=t&&(o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.setRequestHeader("Content-Length",t.length)),o.send(t),o.onerror=function(){i.noConnection()},n?(o.onload=function(e){var t=JSON.parse(e.target.responseText);n.call(this,t)},void 0):o}},getCookie=function(e){var t,n,o,i=document.cookie.split(";");for(t=0;i.length>t;t++)if(n=i[t].substr(0,i[t].indexOf("=")),o=i[t].substr(i[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==e)return unescape(o)},setCookie=function(e,t,n){var o=new Date((new Date).getTime()+parseInt(n)),i=escape(t)+(null==n?"":"; expires="+o.toUTCString());document.cookie=e+"="+i},checkCookie=function(e){var t=getCookie(e);return null!=t&&""!=t?!0:!1},t.prototype.date=function(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getHours(),s=e.getMinutes();return 1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),t+"-"+n+"-"+o+" "+i+":"+s},FB=new t}(window);